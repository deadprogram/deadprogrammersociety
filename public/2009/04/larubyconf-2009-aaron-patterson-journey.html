<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>LARubyConf 2009 - Aaron Patterson - &#34;Journey Thru A Pointy Forest, or You Suck At XML&#34; - Dead Programmer SOciety</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="/favicon.png">
  <link rel="canonical" href="/2009/04/larubyconf-2009-aaron-patterson-journey.html" />

  
  
  <link rel="stylesheet" href="/css/style.min.6b89cc86c0b843a772cdd6c6a8b7e11c2116c7933f6163d2ef225a87e1d2c121.css">
  

  
    
    <meta property="og:title" content="LARubyConf 2009 - Aaron Patterson - &#34;Journey Thru A Pointy Forest, or You Suck At XML&#34;"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="/2009/04/larubyconf-2009-aaron-patterson-journey.html"/>
    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@deadprogram"/>
    <meta name="twitter:creator" content="@deadprogram"/>
  

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet"> 
</head>




<body class='page frame page-blog-single'>
  <div id="menu-main-mobile" class="menu-main-mobile">
    <ul class="menu">
        
        
            
                <li class="menu-item-home">
                    <a href="/">Home</a>
                </li>
            
        
            
                <li class="menu-item-blog">
                    <a href="/posts/">Blog</a>
                </li>
            
        
            
                <li class="menu-item-about">
                    <a href="/about/">About</a>
                </li>
            
        
            
                <li class="menu-item-tags">
                    <a href="/tags/">Tags</a>
                </li>
            
        
    </ul>
</div>
  <div id="wrapper" class="wrapper">
    <div class='header'>
  <a class="header-logo" href="/">Dead Programmer SOciety</a>
  <div class="menu-main">
    <ul>
      
      
      
      
      <li class="menu-item-home ">
        <a href="/">
          
          <span>Home</span>
        </a>
      </li>
      
      
      
      <li class="menu-item-blog ">
        <a href="/posts/">
          
          <span>Blog</span>
        </a>
      </li>
      
      
      
      <li class="menu-item-about ">
        <a href="/about/">
          
          <span>About</span>
        </a>
      </li>
      
      
      
      <li class="menu-item-tags ">
        <a href="/tags/">
          
          <span>Tags</span>
        </a>
      </li>
      
    </ul>
  </div>
  <div id="toggle-menu-main-mobile" class="hamburger-trigger">
    <button class="hamburger">Menu</button>
  </div>
</div>
    
  <div class="blog">
    
    <div class="intro">
      <h1>LARubyConf 2009 - Aaron Patterson - &#34;Journey Thru A Pointy Forest, or You Suck At XML&#34;<span class="dot">.</span></h1>
      
    </div>
    <div class="content">
      <p><a href="http://1.bp.blogspot.com/_W1ueYt1O3xs/R0xGYiwAJNI/AAAAAAAAClQ/b7vhHdsJIG4/s320/Ice-covered%2BWillow%2BTrees.jpg"><img src="http://1.bp.blogspot.com/_W1ueYt1O3xs/R0xGYiwAJNI/AAAAAAAAClQ/b7vhHdsJIG4/s320/Ice-covered%2BWillow%2BTrees.jpg" alt=""></a>The second presentation of the day at <a href="http://www.larubyconf.com/">Los Angeles Ruby Conference 2009 (LARubyConf)</a> was <a href="http://tenderlovemaking.com/">Aaron Patterson</a>, XML maniac. I had a run at hardcore XML/XSL a few years back, and it has been a while since I walked the razor&rsquo;s edge of the angle bracket. But Aaron is not just an aficionado, he is genuinely obsessed. Given that he is the maintainer of the <a href="http://github.com/tenderlove/nokogiri/tree/master">Nokogiri</a> and <a href="http://mechanize.rubyforge.org/">Mechanize</a> gems, this makes me happy.</p>
<p>He covered four areas related to XML:<br>
- XML Processing<br>
- HTML Processing<br>
- Data Extraction<br>
- HTML Correction</p>
<p>The XML Processing section was as thorough a synopsis of XML as one could possible fit into just a few minutes. He went over the four main XML processing styles:<br>
- SAX<br>
- Push<br>
- Pull<br>
- DOM</p>
<p>SAX parsers are fast, and low on memory use. However, searching is hard, doc handlers are verbose, and programmer expense high.</p>
<p>Push Parsing works the same as SAX, the difference is the programmer controls document IO. Has low memory use, fast, fine control over IO.</p>
<p>Pull Parsers are handed XML, and yield a node object. They work like cursors, moving thru the document, so you only get one chance to process data without starting over from the beginning again.</p>
<p>DOM Interface is what most programmers are familiar with. Given XML, they build an in-memory tree. They can then be easily searched using XPath. DOM parsers provide easy data extraction, are programmer friendly, but have high memory use, and you pay a serious speed penalty.</p>
<p>HTML Processing is just like XML parsing, but it limited to the HTML DOM.</p>
<p>Data Extraction in XML can be done two different ways:<br>
- CSS selectors<br>
- XPath queries</p>
<p>XPath basics:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">  
  //foo &lt;!-- start at absolute root --&gt;  
  .//foo &lt;!-- start a relative root --&gt;  
  //foo\[@bar\] &lt;!-- has bar attribute --&gt;  
  //foo\[@bar = &#39;baz&#39;\] &lt;!-- has bar attribute with a value of &#39;baz&#39; --&gt;  

</code></pre></div><p>Here is an example of a problem for parsers that support either CSS and XPath selector as parameter, like Hpricot:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">  
p\[b\]  

</code></pre></div><p>The problem is that it is both valid XPath AND CSS. Nokugiri has separate methods for searching CSS or Xpath, so as to avoid this problem.</p>
<p>XML Namespaces use URL&rsquo;s to remain globally unique, to avoid collisions between XML formats taht are different, but use the same node name. Here is an important point: XML Namespaces are as important as tag names.</p>
<p>HTML Correction is taking some invalid HTML, and &ldquo;fixing&rdquo; it. For example, making sure that all tags are properly nested.</p>
<p>Aaron wrote a tool called <a href="http://github.com/tenderlove/tree_diff/tree/master">tree_diff</a>, that compares XML trees, cause &ldquo;they are interesting&rdquo;. With this tool he was able to process many HTML files with multiple HTML correctors/parsers, then compare the results to see if they matched. In many cases, they did not!</p>
<p>Fonts are hard<br>
Attributes are harder</p>
<p>29% of the time it works all of the time</p>
<p>Seems like after all that, I will never use anything but Nokogiri for XML parsing again!</p>

    </div>
  </div>

    <div class="footer">
  
  <div class="footer-social">
    
      <span class="social-icon social-icon-twitter">
        <a href="https://twitter.com/deadprogram" title="twitter" target="_blank" rel="noopener">
          <img src="/images/social/twitter.svg" width="24" height="24" alt="twitter"/>
        </a>
      </span>
    
      <span class="social-icon social-icon-github">
        <a href="https://github.com/deadprogram" title="github" target="_blank" rel="noopener">
          <img src="/images/social/github.svg" width="24" height="24" alt="github"/>
        </a>
      </span>
    
      <span class="social-icon social-icon-linkedin">
        <a href="https://www.linkedin.com/in/deadprogram/" title="linkedin" target="_blank" rel="noopener">
          <img src="/images/social/linkedin.svg" width="24" height="24" alt="linkedin"/>
        </a>
      </span>
    
  </div>
  
</div>
  </div>

  

  

  
  <script type="text/javascript" src="/js/bundle.min.575671c6da23c3563d465f9cfa3d2857fc0239531a2e8ea1fb6812017653b4d7.js"></script>
  

  
  

  
  
  
    
  

  


</body>
</html>