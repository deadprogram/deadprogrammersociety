<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Project Flying Robot: Getting RAD With The ATMega328 - Dead Programmer SOciety</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="/favicon.png">
  <link rel="canonical" href="/2009/04/project-flying-robot-getting-rad-with.html" />

  
  
  <link rel="stylesheet" href="/css/style.min.6b89cc86c0b843a772cdd6c6a8b7e11c2116c7933f6163d2ef225a87e1d2c121.css">
  

  
    
    <meta property="og:title" content="Project Flying Robot: Getting RAD With The ATMega328"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="/2009/04/project-flying-robot-getting-rad-with.html"/>
    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@deadprogram"/>
    <meta name="twitter:creator" content="@deadprogram"/>
  

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet"> 
</head>




<body class='page frame page-blog-single'>
  <div id="menu-main-mobile" class="menu-main-mobile">
    <ul class="menu">
        
        
            
                <li class="menu-item-home">
                    <a href="/">Home</a>
                </li>
            
        
            
                <li class="menu-item-blog">
                    <a href="/posts/">Blog</a>
                </li>
            
        
            
                <li class="menu-item-about">
                    <a href="/about/">About</a>
                </li>
            
        
            
                <li class="menu-item-tags">
                    <a href="/tags/">Tags</a>
                </li>
            
        
    </ul>
</div>
  <div id="wrapper" class="wrapper">
    <div class='header'>
  <a class="header-logo" href="/">Dead Programmer SOciety</a>
  <div class="menu-main">
    <ul>
      
      
      
      
      <li class="menu-item-home ">
        <a href="/">
          
          <span>Home</span>
        </a>
      </li>
      
      
      
      <li class="menu-item-blog ">
        <a href="/posts/">
          
          <span>Blog</span>
        </a>
      </li>
      
      
      
      <li class="menu-item-about ">
        <a href="/about/">
          
          <span>About</span>
        </a>
      </li>
      
      
      
      <li class="menu-item-tags ">
        <a href="/tags/">
          
          <span>Tags</span>
        </a>
      </li>
      
    </ul>
  </div>
  <div id="toggle-menu-main-mobile" class="hamburger-trigger">
    <button class="hamburger">Menu</button>
  </div>
</div>
    
  <div class="blog">
    
    <div class="intro">
      <h1>Project Flying Robot: Getting RAD With The ATMega328<span class="dot">.</span></h1>
      
    </div>
    <div class="content">
      <p><a href="http://cache.jalopnik.com/assets/resources/2008/04/wind-tunnel.jpg"><img src="http://cache.jalopnik.com/assets/resources/2008/04/wind-tunnel.jpg" alt=""></a>I have been wanting to upgrade the hardware used in our <a href="http://dorkbotpdx.org/wiki/dorkboard">Dorkboards</a> for <a href="http://flyingrobo.com">flying_robot</a>, from the ATMega168, to the newer better faster ATMega328. More memory, and a faster UART for serial communications with the XBee modems in the same pinout = easy win. Thanks to a quick shipping turnaround from <a href="http://www.adafruit.com">@adafruit</a> I got them in before the weekend, so I could play a little bit today.</p>
<p>The first step was to upgrade my hard-working Arduino Diecimila to a 328. I now have it working great with <a href="http://rad.rubyforge.org/">Ruby Arduino Development (RAD)</a>, but since RAD was really setup for Arduino 12, I had to make a couple changes. Here is what I did:</p>
<p>1. D/l and install <a href="http://arduino.cc/en/Main/Software">Arduino 15</a> (brave, I know, since that is the latest release, and many people run one version down from the latest)<br>
2. Change my hardware.yml entry</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">mcu: atmega328p
</code></pre></div><p>3. Change my software.yml entry</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">arduino\_root: /Applications/arduino-0015
</code></pre></div><p>4. Lastly, since the ATMega328 bootloader runs at a faster rate, I had to tweak the RAD code itself to support it. The file &ldquo;/vendors/rad/generators/makefile/makefile.erb&rdquo; is the template used to create the makefile that compiles and uploads the code to the Arduino. Line 77 in that file controls the baud rate, which needs to be set like this for the &lsquo;328:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">UPLOAD\_RATE = 57600
</code></pre></div><p>Once I had done this, I was easily and quickly able to recompile/re-upload the latest flying_robot code to my test board. Yeah! Hopefully tomorrow I can upgrade <a href="http://github.com/deadprogrammer/flying_robot_rogue_one/tree/master">Rogue 1</a> and try a flight at the new, higher communication speed.</p>

    </div>
  </div>

    <div class="footer">
  
  <div class="footer-social">
    
      <span class="social-icon social-icon-twitter">
        <a href="https://twitter.com/deadprogram" title="twitter" target="_blank" rel="noopener">
          <img src="/images/social/twitter.svg" width="24" height="24" alt="twitter"/>
        </a>
      </span>
    
      <span class="social-icon social-icon-github">
        <a href="https://github.com/deadprogram" title="github" target="_blank" rel="noopener">
          <img src="/images/social/github.svg" width="24" height="24" alt="github"/>
        </a>
      </span>
    
      <span class="social-icon social-icon-linkedin">
        <a href="https://www.linkedin.com/in/deadprogram/" title="linkedin" target="_blank" rel="noopener">
          <img src="/images/social/linkedin.svg" width="24" height="24" alt="linkedin"/>
        </a>
      </span>
    
  </div>
  
</div>
  </div>

  

  

  
  <script type="text/javascript" src="/js/bundle.min.575671c6da23c3563d465f9cfa3d2857fc0239531a2e8ea1fb6812017653b4d7.js"></script>
  

  
  

  
  
  
    
  

  


</body>
</html>